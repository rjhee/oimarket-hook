(this.webpackJsonpoimakey=this.webpackJsonpoimakey||[]).push([[0],{38:function(e,t,c){},39:function(e,t,c){},51:function(e,t,c){},52:function(e,t,c){},56:function(e,t,c){"use strict";c.r(t);var a=c(3),n=c.n(a),s=c(31),i=c.n(s),r=c(6),o=(c(38),c(39),c(5)),l=c.n(o),u=c(25),j=c(20),d=c(10),m=c(14),h=c(7),b=c(23),p=(c(41),c(57),c(58),c(44),b.a.initializeApp({apiKey:"AIzaSyBaCmuwlNoUQufMLaFDIXe82FGnfRUVsRA",authDomain:"oimarket-f7461.firebaseapp.com",projectId:"oimarket-f7461",storageBucket:"oimarket-f7461.appspot.com",messagingSenderId:"374434336766",appId:"1:374434336766:web:fb61fd2cb89da7738b3aaf",measurementId:"G-GN8P8CYKXL"})),O=b.a.firestore(),f=b.a.storage(),x=p.auth();b.a.database();var g=c(2);var N=function(){return Object(g.jsxs)("nav",{children:[Object(g.jsx)(r.b,{to:"/",children:Object(g.jsxs)("h1",{className:"nav-logo",children:[Object(g.jsx)("i",{className:"icon-cucumber"}),Object(g.jsx)("strong",{children:"\uc624\uc774\ub9c8\ucf13"})]})}),Object(g.jsx)("div",{className:"toggle-cover",children:Object(g.jsx)("button",{className:"nav-search",children:Object(g.jsx)("i",{className:"icon-search"})})})]})};var v=function(e){return Object(g.jsx)("footer",{children:Object(g.jsxs)("ul",{className:"footer-menu",children:[Object(g.jsx)("li",{children:Object(g.jsx)(r.b,{to:"/",children:Object(g.jsx)("i",{className:"icon-home"})})}),Object(g.jsx)("li",{children:Object(g.jsx)(r.b,{to:"/",children:Object(g.jsx)("i",{className:"icon-navigation"})})}),Object(g.jsx)("li",{className:"footer-upload",children:Object(g.jsx)(r.b,{as:r.b,to:"/uploadForm",children:Object(g.jsx)("i",{className:"icon-plus"})})}),Object(g.jsx)(r.b,{to:"/chatList",children:Object(g.jsx)("li",{onClick:function(){e.getChatList()},children:Object(g.jsx)("i",{className:"icon-chat2"})})}),Object(g.jsx)("li",{children:Object(g.jsx)(r.b,{as:r.b,to:"/userProfile",children:Object(g.jsx)("i",{className:"icon-user"})})})]})})},w=function(e){var t=Object(h.f)(),c=Object(a.useState)({already:"\uc774\ubbf8 \uac00\uc785\ub418\uc5b4\uc788\ub294 \uc774\uba54\uc77c \uc785\ub2c8\ub2e4!",badly:"\uc720\ud6a8\ud55c \uc774\uba54\uc77c\uc774 \uc544\ub2d9\ub2c8\ub2e4",password:"\ube44\ubc00\ubc88\ud638\ub294 6\uc790\ub9ac \uc774\uc0c1 \uc785\ub825\ud574\uc8fc\uc138\uc694",etc:"\ub2e4\uc2dc \uc785\ub825\ud574\uc8fc\uc138\uc694"}),n=Object(m.a)(c,2),s=n[0],i=(n[1],function(){var c=Object(d.a)(l.a.mark((function c(a){return l.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:a.preventDefault(),x.createUserWithEmailAndPassword(e.email,e.password).then((function(c){var a=c.user.uid,n={name:e.name,email:e.email};O.collection("user").doc(a).set(n),c.user.updateProfile({displayName:e.name}).then((function(){return alert(e.name+"\ub2d8 \ud68c\uc6d0\uac00\uc785\uc774 \uc644\ub8cc \ub418\uc5c8\uc2b5\ub2c8\ub2e4")})).then((function(){t.push("/login")}))})).catch((function(e){console.log(e);var t=e.message;t.includes("already")?alert(s.already):t.includes("badly")?alert(s.badly):t.includes("6")?alert(s.password):e&&alert(s.etc)}));case 2:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}());return Object(g.jsxs)("section",{className:"join",children:[Object(g.jsx)("h1",{children:"\ud68c\uc6d0\uac00\uc785"}),Object(g.jsxs)("form",{onSubmit:i,children:[Object(g.jsx)("input",{name:"name",type:"text",placeholder:"\uc774\ub984",className:"user-name",autoFocus:!0,required:!0,onChange:e.onChange,value:e.name}),Object(g.jsx)("input",{name:"email",type:"email",placeholder:"\uc774\uba54\uc77c@email.com",className:"user-email",required:!0,onChange:e.onChange,value:e.email}),Object(g.jsx)("input",{name:"password",type:"password",placeholder:"\ube44\ubc00\ubc88\ud638 (4\uc790\ub9ac \uc774\uc0c1)",className:"user-password",required:!0,onChange:e.onChange,value:e.password}),Object(g.jsx)("div",{className:"line"}),Object(g.jsx)("button",{type:"submit",className:"join-btn",children:"\uac00\uc785\ud558\uae30"})]}),Object(g.jsxs)("div",{className:"join-link",children:[Object(g.jsx)("span",{children:"\ud68c\uc6d0\uc774\uc2e0\uac00\uc694?"}),Object(g.jsx)(r.b,{to:"/login",children:Object(g.jsx)("button",{children:"\ub85c\uadf8\uc778\ud558\uae30"})})]})]})};var C=function(e){return Object(h.f)(),Object(g.jsxs)("section",{className:"login",children:[Object(g.jsx)("h1",{children:"\ub85c\uadf8\uc778"}),Object(g.jsxs)("form",{onSubmit:e.onSubmitLogin,children:[Object(g.jsx)("input",{name:"email",type:"email",placeholder:"\uc774\uba54\uc77c@email.com",className:"user-email",required:!0,onChange:e.onChange,value:e.email}),Object(g.jsx)("input",{name:"password",type:"password",placeholder:"\ube44\ubc00\ubc88\ud638 (4\uc790\ub9ac \uc774\uc0c1)",className:"user-password",required:!0,onChange:e.onChange,value:e.password}),Object(g.jsx)("div",{className:"line"}),Object(g.jsx)("button",{type:"submit",className:"login-btn",children:"\ub85c\uadf8\uc778\ud558\uae30"})]}),Object(g.jsxs)("div",{className:"join-link",children:[Object(g.jsx)("span",{children:"\ud68c\uc6d0\uc774\uc544\ub2c8\uc2e0\uac00\uc694?"}),Object(g.jsx)(r.b,{to:"/join",children:Object(g.jsx)("button",{children:"\ud68c\uc6d0\uac00\uc785\ud558\uae30"})})]})]})};var y=function(e){var t=Object(h.f)(),c=Object(h.g)().id,n=e.products.find((function(e){return e.id===c})),s=(n.time[0],n.time[1]),i=n.time[2],r=n.time[3],o=n.time[4],l="".concat(s+1,"\uc6d4").concat(i,"\uc77c ").concat(r,"\uc2dc").concat(o,"\ubd84"),u={backgroundImage:"url(".concat(n.img,")")};return Object(a.useEffect)((function(){window.scrollTo(0,0)})),Object(g.jsxs)("section",{className:"product-detail",children:[Object(g.jsx)("div",{className:"img-cover",children:Object(g.jsx)("span",{className:"productImg",style:u})}),Object(g.jsxs)("div",{className:"product-detail-contents",children:[Object(g.jsx)("h1",{className:"title",children:n.title}),Object(g.jsxs)("div",{className:"detail-btn-cover",children:[Object(g.jsx)("button",{className:"edit",onClick:function(){t.push("/edit/"+n.id),e.getProductDetail()},children:"\uc218\uc815"}),Object(g.jsx)("button",{className:"delete",onClick:function(){e.deleteProduct()},children:"\uc0ad\uc81c"})]}),Object(g.jsx)("strong",{className:"price",children:n.price}),Object(g.jsx)("div",{className:"product-detail-info",children:Object(g.jsxs)("div",{className:"user-profile",children:[Object(g.jsx)("div",{className:"user-photo",children:Object(g.jsx)("i",{className:"icon-user"})}),Object(g.jsxs)("div",{className:"user-profile-cover",children:[Object(g.jsx)("span",{className:"user-name",children:n.user}),Object(g.jsx)("span",{className:"user-location",children:n.location})]})]})}),Object(g.jsx)("p",{className:"product-detail-desc",children:n.desc}),Object(g.jsxs)("div",{className:"product-detail-count",children:[Object(g.jsx)("span",{className:"date",children:l}),Object(g.jsxs)("div",{children:[Object(g.jsx)("span",{className:"like",children:"\ucc1c 3"}),Object(g.jsx)("span",{className:"comment",children:"\ucc44\ud305 3"}),Object(g.jsx)("span",{className:"views",children:"\uc870\ud68c 3"})]})]}),Object(g.jsxs)("div",{className:"product-detail-btn",children:[Object(g.jsx)("button",{className:"like-btn",children:Object(g.jsx)("i",{className:"icon-heart"})}),Object(g.jsx)("button",{className:"chat-btn",onClick:function(){e.createChat().then((function(c){t.push("/chatroom/"+c),e.getChatMessages(14)}))},children:"\ucc44\ud305\ud558\uae30"})]})]})]})};var k=function(e){var t=Object(h.f)(),c={backgroundImage:"url(".concat(e.product.img,")")},a=(e.product.time[0],e.product.time[1]),n=e.product.time[2],s=e.product.time[3],i=e.product.time[4],r="".concat(a+1,"\uc6d4").concat(n,"\uc77c ").concat(s,"\uc2dc").concat(i,"\ubd84");return Object(g.jsxs)("li",{className:"product",onClick:function(){t.push("/productDetail/"+e.product.id)},children:[Object(g.jsx)("div",{className:"product-img",style:c}),Object(g.jsxs)("div",{className:"product-info",children:[Object(g.jsx)("h3",{className:"product-title",children:e.product.title}),Object(g.jsxs)("div",{className:"upload-info",children:[Object(g.jsx)("span",{className:"upload-location",children:e.product.loction}),Object(g.jsx)("span",{className:"upload-date",children:r})]}),Object(g.jsx)("strong",{className:"product-price",children:e.product.price}),Object(g.jsxs)("div",{className:"btn-group",children:[Object(g.jsxs)("div",{className:"like",children:[Object(g.jsx)("i",{className:"far fa-heart like-btn"}),Object(g.jsx)("span",{className:"like-num",children:"2"})]}),Object(g.jsxs)("div",{className:"comment",children:[Object(g.jsx)("i",{className:"far fa-comment comment-btn"}),Object(g.jsx)("span",{className:"comment-num",children:"0"})]})]})]})]})};var S=function(e){return Object(g.jsx)("ul",{className:"product-list",children:e.products.map((function(e){return Object(g.jsx)(k,{product:e},e.id)}))})};var M=function(e){Object(h.f)();var t=e.user.name,c=e.user.email,n=e.isUser,s=Object(g.jsx)(r.b,{to:"/login",children:"\ub85c\uadf8\uc778\ud558\uae30"}),i=!0===n?"\ub85c\uadf8\uc544\uc6c3":"\ub85c\uadf8\uc778",o=!0===n?"/logout":"/login";return Object(a.useEffect)((function(){window.scrollTo(0,0)})),Object(g.jsxs)("div",{className:"user",children:[Object(g.jsxs)("section",{className:"user-profile",children:[Object(g.jsxs)("div",{className:"user-profile-info",children:[Object(g.jsxs)("label",{className:"user-photo-cover",htmlFor:"user-photo",children:[Object(g.jsx)("div",{className:"user-photo"}),Object(g.jsx)("i",{className:"icon-user photo"}),Object(g.jsx)("i",{className:"fas fa-camera camera"})]}),Object(g.jsx)("input",{type:"file",accept:"image/*",id:"user-photo",className:"hidden"}),Object(g.jsxs)("div",{className:"user-profile-cover",children:[Object(g.jsx)("h1",{className:"name",children:!0===n?t:s}),Object(g.jsx)("span",{className:"location"}),Object(g.jsx)("span",{className:"email",children:!0===n?c:"\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4"})]})]}),Object(g.jsxs)("div",{className:"user-profile-item",children:[Object(g.jsx)("button",{className:"user-goods-total",children:Object(g.jsx)("i",{className:"icon-tasks"})}),Object(g.jsx)("button",{className:"like-total",children:Object(g.jsx)("i",{className:"icon-heart"})}),Object(g.jsx)("button",{className:"setting",children:Object(g.jsx)("i",{className:"icon-setting"})})]}),Object(g.jsxs)("section",{className:"user-profile-btn",children:[!1===n?Object(g.jsx)(r.b,{to:"/join",children:Object(g.jsx)("button",{className:"user-profile-join",children:"\ud68c\uc6d0\uac00\uc785"})}):null,Object(g.jsx)(r.b,{to:o,children:Object(g.jsx)("button",{className:"user-profile-login",onClick:n&&e.onClickLogout,children:i})})]}),Object(g.jsx)("div",{className:"line"}),Object(g.jsxs)("div",{className:"user-profile-service",children:[Object(g.jsxs)("button",{className:"notice",children:[Object(g.jsx)("i",{className:"fas fa-bell"}),Object(g.jsx)("span",{children:" \uacf5\uc9c0\uc0ac\ud56d"})]}),Object(g.jsxs)("button",{className:"service-center",children:[Object(g.jsx)("i",{className:"fas fa-headset"}),Object(g.jsx)("span",{children:" \uace0\uac1d\uc13c\ud130"})]}),Object(g.jsxs)("button",{className:"questions",children:[Object(g.jsx)("i",{className:"far fa-question-circle"}),Object(g.jsx)("span",{children:"\uc790\uc8fc\ud558\ub294 \uc9c8\ubb38"})]}),Object(g.jsxs)("button",{className:"madein",children:[Object(g.jsx)("i",{className:"fas fa-users"}),Object(g.jsx)("span",{children:" \ub9cc\ub4e0\uc0ac\ub78c"})]})]})]}),Object(g.jsx)("div",{className:"line"})]})};var P=function(e){return Object(a.useEffect)((function(){window.scrollTo(0,0)})),Object(g.jsxs)("form",{className:"upload-form",onSubmit:e.onSubmitUploadForm,children:[Object(g.jsx)("input",{name:"title",type:"text",className:"upload-title",placeholder:"\uae00 \uc81c\ubaa9",autoFocus:!0,onChange:e.onProductChange}),Object(g.jsx)("input",{name:"price",type:"tel",className:"upload-price",placeholder:"\u20a9 \uc0c1\ud488 \uac00\uaca9",onChange:e.onProductChange}),Object(g.jsx)("textarea",{name:"desc",className:"upload-desc",placeholder:"\ud310\ub9e4\ud558\uc2e4 \uc0c1\ud488\uc5d0 \ub300\ud55c \uc124\uba85\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694!",onChange:e.onProductChange}),Object(g.jsx)("label",{htmlFor:"upload-img",className:"upload-img",children:"\ud30c\uc77c\uc5c5\ub85c\ub4dc"}),Object(g.jsx)("input",{type:"file",id:"upload-img",className:"hidden",accept:"image/*",onChange:e.onFileChange}),Object(g.jsxs)("div",{className:"btn-group",children:[Object(g.jsx)("button",{className:"close-btn",children:"\ub4a4\ub85c\uac00\uae30"}),Object(g.jsx)("button",{type:"submit",className:"upload-btn",children:"\uae00 \uc62c\ub9ac\uae30"})]})]})};var D=function(e){var t=Object(h.g)().id;return e.products.find((function(e){return e.id===t})),Object(g.jsxs)("form",{className:"upload-form",onSubmit:e.onSubmitEdit,children:[Object(g.jsx)("input",{name:"title",type:"text",className:"upload-title",placeholder:"\uae00 \uc81c\ubaa9",autoFocus:!0,value:e.editProduct.title,onChange:e.onEditChange}),Object(g.jsx)("input",{name:"price",type:"tel",className:"upload-price",placeholder:"\u20a9 \uc0c1\ud488 \uac00\uaca9",value:e.editProduct.price,onChange:e.onEditChange}),Object(g.jsx)("textarea",{name:"desc",className:"upload-desc",placeholder:"\ud310\ub9e4\ud558\uc2e4 \uc0c1\ud488\uc5d0 \ub300\ud55c \uc124\uba85\uc744 \uc785\ub825\ud574\uc8fc\uc138 \uc694!",value:e.editProduct.desc,onChange:e.onEditChange}),Object(g.jsx)("label",{htmlFor:"upload-img",className:"upload-img",children:"\ud30c\uc77c\uc5c5\ub85c\ub4dc"}),Object(g.jsx)("input",{type:"file",id:"upload-img",className:"hidden",accept:"image/*",onChange:e.onFileChange}),Object(g.jsxs)("div",{className:"btn-group",children:[Object(g.jsx)("button",{className:"close-btn",children:"\ub4a4\ub85c\uac00\uae30"}),Object(g.jsx)("button",{type:"submit",className:"upload-btn",children:"\uae00 \uc62c\ub9ac\uae30"})]})]})},F=function(e){var t=Object(h.f)(),c=(Object(h.g)().id,e.chat.time[1]),a=e.chat.time[2],n=e.chat.time[3],s=e.chat.time[4],i="".concat(c+1,"\uc6d4").concat(a,"\uc77c ").concat(n,"\uc2dc").concat(s,"\ubd84"),r={backgroundImage:"url(".concat(e.chat.img,")")};return Object(g.jsxs)("li",{className:"chat-list",onClick:function(){t.push("/chatroom/"+e.chat.id)},children:[Object(g.jsx)("div",{className:"chat-list-opponent-img"}),Object(g.jsxs)("div",{className:"chat-list-contents",children:[Object(g.jsxs)("div",{className:"chat-list-info",children:[Object(g.jsx)("span",{className:"chat-list-opponent-name",children:e.chat.name[1]}),Object(g.jsx)("span",{className:"chat-list-time",children:i})]}),Object(g.jsx)("span",{className:"chat-list-text",children:e.chat.product})]}),Object(g.jsx)("div",{className:"chat-list-product-img",style:r})]})};var L=function(e){return Object(g.jsx)("ul",{className:"chat-list-box",children:e.chatList.map((function(t){return Object(g.jsx)(h.a,{path:"/chat:id",component:F,children:Object(g.jsx)(F,{chat:t,getChatMessages:e.getChatMessages},t.id)})}))})};var E=function(e){var t,c,n=Object(h.g)().id,s=e.chatList.find((function(e){return e.id===n})),i=("url(".concat(s&&s.img,")"),e.chatMessages);console.log(i);var r=document.querySelector(".chatting li:last-child");return Object(a.useEffect)((function(){r&&r.scrollIntoView({block:"start"})}),[r]),Object(g.jsxs)("section",{className:"chatting-room",children:[Object(g.jsx)("ul",{className:"chatting",children:i.map((function(a){return Object(g.jsxs)("li",{className:"chat-box"+(a.uid===e.user.uid?" mine":" opponent"),children:[Object(g.jsx)("span",{className:"chat-box-time",children:(c=a.time[3]<12?"\uc624\uc804":"\uc624\ud6c4",t=a.time[4]<10?"0":0,c+" "+a.time[3]+":"+t+a.time[4])}),Object(g.jsx)("span",{className:"chat-box-text",children:a.content})]},a.id)}))}),Object(g.jsxs)("form",{className:"chatting-form",onSubmit:e.createChatMessages,children:[Object(g.jsx)("input",{type:"text",name:"chat-form-text",onChange:e.onMessageChange,autoFocus:!0,placeholder:"\uba54\uc138\uc9c0\ub97c \uc785\ub825\ud558\uc138\uc694"}),Object(g.jsx)("button",{onClick:function(){e.getChatMessages(10)},children:Object(g.jsx)("i",{className:"icon-send"})})]})]})};function I(){return Object(g.jsx)("div",{className:"modal",children:"\uc131\uacf5"})}var q=function(){var e,t,c,n,s,i,r,o,b,p=Object(h.f)(),k=(Object(h.g)().id,Object(a.useState)([])),F=Object(m.a)(k,2),q=F[0],B=F[1],U=Object(a.useState)(""),A=Object(m.a)(U,2),T=A[0],Y=A[1],G=Object(a.useState)(""),H=Object(m.a)(G,2),R=H[0],z=H[1],J=Object(a.useState)(""),K=Object(m.a)(J,2),V=K[0],W=K[1],X=Object(a.useState)({name:"",email:"",uid:""}),Q=Object(m.a)(X,2),_=Q[0],Z=Q[1],$=Object(a.useState)(!1),ee=Object(m.a)($,2),te=ee[0],ce=ee[1],ae=Object(a.useState)({id:"",uid:"",img:"",time:"",title:"",price:"",desc:""}),ne=Object(m.a)(ae,2),se=ne[0],ie=ne[1],re=Object(a.useState)([]),oe=Object(m.a)(re,2),le=oe[0],ue=oe[1],je=Object(a.useState)([]),de=Object(m.a)(je,2),me=de[0],he=de[1],be=Object(a.useState)(""),pe=Object(m.a)(be,2),Oe=pe[0],fe=pe[1],xe=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.collection("product").orderBy("time","asc").get();case 2:e.sent.forEach((function(e){var t=Object(j.a)(Object(j.a)({},e.data()),{},{id:e.id});B((function(e){return[t].concat(Object(u.a)(e))}))}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ge=function(){var e=Object(d.a)(l.a.mark((function e(t){var c,a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=t.target,a=c.name,n=c.value,"name"===a?Y(n):"email"===a?z(n):"password"===a&&W(n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ne=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),x.signInWithEmailAndPassword(R,V).then((function(e){return Z({name:e.user.displayName,email:e.user.email,uid:e.user.uid})}),ce(!0)).then((function(){"/join"===p.location.pathname?p.goBack():p.push("/userProfile")})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ve=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x.signOut().then((function(){return ce(!1)})).then((function(){return p.goBack()}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),we=function(){var e=Object(d.a)(l.a.mark((function e(t){var c,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=t.target,a=c.name,r=c.value,"title"===a?n=r:"price"===a?s=r:"desc"===a&&(i=r);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ce=function(){var e=Object(d.a)(l.a.mark((function e(t){var c,a,n,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=t.target.files,a=f.ref(),n=a.child("image/".concat(c[0].name)),(s=n.put(c[0])).on("state_changed",null,(function(e){console.log("\uc2e4\ud328\uc0ac\uc720\ub294",e)}),(function(){s.snapshot.ref.getDownloadURL().then((function(e){return r=e}))}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ye=Object(a.useState)(!1),ke=Object(m.a)(ye,2),Se=ke[0],Me=ke[1],Pe=function(){var a=Object(d.a)(l.a.mark((function a(o){var u,j,d,m,h,b,f;return l.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:o.preventDefault(),u=new Date,j=u.getFullYear(),d=u.getMonth(),m=u.getDate(),h=u.getHours(),b=u.getMinutes(),e=u.getTime(),c=_.name,t=_.uid,f={id:e,uid:t,user:c,title:n,price:s,desc:i,img:r,time:[j,d,m,h,b]},console.log(f),O.collection("product").add(f).then((function(){return Me(!0)}),setTimeout((function(){Me(!1)}),1e3)).then((function(){return p.push("/")}));case 14:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),De=q.find((function(e){return e.id===p.location.pathname.substr(15)})),Fe=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ie({title:De.title,price:De.price,desc:De.desc});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Le=function(){var e=Object(d.a)(l.a.mark((function e(t){var c,a,n,s,i,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=t.target,a=c.name,n=c.value,"title"===a?s=n:"price"===a?i=n:"desc"===a&&(r=n),ie({title:s,price:i,desc:r}),!1===p.location.pathname.includes("edit")&&ie(null);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ee=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),console.log(De.id),console.log(se);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O.collection("product").doc(De.id).delete();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),qe=function(){var e=Object(d.a)(l.a.mark((function e(){var t,c,a,n,s,i,r,o,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new Date,c=t.getFullYear(),a=t.getMonth(),n=t.getDate(),s=t.getHours(),i=t.getMinutes(),r=[c,a,n,s,i],o={name:[_.name,De.user],who:[_.uid,De.uid],product:De.title,time:r,order:t,img:De.img},u=O.collection("chatroom").add(o).then((function(e){return fe({id:e.id}),console.log(e),e.id})),e.abrupt("return",u);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Be=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O.collection("chatroom").where("who","array-contains",_.uid).orderBy("order","asc").onSnapshot((function(e){ue([]),e.forEach((function(e){var t=Object(j.a)(Object(j.a)({},e.data()),{},{id:e.id});ue((function(e){return[t].concat(Object(u.a)(e))}))})),console.log(le)}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ue=(le.find((function(e){return e.id===p.location.pathname.substr(10)})),function(){var e=Object(d.a)(l.a.mark((function e(t){var c,a,n,s,i,r,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=new Date,a=c.getFullYear(),n=c.getMonth(),s=c.getDate(),i=c.getHours(),r=c.getMinutes(),""!==(u=t.target.value)){e.next=11;break}return e.abrupt("return");case 11:o=u;case 12:b=[a,n,s,i,r];case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Ae=function(){var e=Object(d.a)(l.a.mark((function e(t){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),t.target.firstChild.value="",t.target.firstChild.focus(),c={content:o,time:b,uid:_.uid,name:_.name},O.collection("chatroom").doc(Oe.id).collection("messages").add(c).then((function(e){console.log(e)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Te=function(){var e=Object(d.a)(l.a.mark((function e(t){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=p.location.pathname.substr(t),O.collection("chatroom").doc(c).collection("messages").orderBy("time","desc").onSnapshot((function(e){he([]),e.forEach((function(e){var t=Object(j.a)(Object(j.a)({},e.data()),{},{id:e.id});he((function(e){return[t].concat(Object(u.a)(e))}))}))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){xe()}),[]),Object(g.jsxs)("div",{className:"App",children:[Object(g.jsx)(N,{}),!0===Se?Object(g.jsx)(I,{}):null,Object(g.jsxs)(h.c,{children:[Object(g.jsx)(h.a,{exact:!0,path:"/",component:S,children:Object(g.jsx)(S,{products:q})}),Object(g.jsx)(h.a,{path:"/userProfile",component:M,children:Object(g.jsx)(M,{user:_,onClickLogout:ve,isUser:te})}),Object(g.jsx)(h.a,{path:"/productDetail/:id",component:y,children:Object(g.jsx)(y,{chatMessages:me,chatList:le,products:q,getProductDetail:Fe,createChat:qe,deleteProduct:Ie,getChatList:Be,getChatMessages:Te})}),Object(g.jsx)(h.a,{path:"/edit/:id",component:D,children:Object(g.jsx)(D,{products:q,editProduct:se,onEditChange:Le,onSubmitEdit:Ee,getProductDetail:Fe})}),Object(g.jsx)(h.a,{path:"/uploadForm",component:P,children:Object(g.jsx)(P,{onProductChange:we,onSubmitUploadForm:Pe,onFileChange:Ce})}),Object(g.jsx)(h.a,{path:"/chatList",component:L,children:Object(g.jsx)(L,{chatList:le,getChatList:Be,getChatMessages:Te})}),Object(g.jsx)(h.a,{path:"/chatroom/:id",component:E,children:Object(g.jsx)(E,{user:_,chatList:le,chatMessages:me,createChatMessages:Ae,onMessageChange:Ue,getChatMessages:Te})}),Object(g.jsx)(h.a,{path:"/join",component:w,children:Object(g.jsx)(w,{name:T,email:R,password:V,onChange:ge})}),Object(g.jsx)(h.a,{path:"/Login",component:C,children:Object(g.jsx)(C,{email:R,password:V,onChange:ge,onSubmitLogin:Ne})})]}),Object(g.jsx)(v,{getChatList:Be})]})};c(51),c(52),c(53);i.a.render(Object(g.jsx)(n.a.StrictMode,{children:Object(g.jsx)(r.a,{children:Object(g.jsx)(q,{})})}),document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.7db5bc79.chunk.js.map